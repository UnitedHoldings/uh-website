# ğŸ—ºï¸ CMS Architecture & Data Flow Reference

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIENT LAYER (React/Next.js)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Products   â”‚  â”‚   Reviews    â”‚  â”‚     Team     â”‚           â”‚
â”‚  â”‚  Components  â”‚  â”‚  Components  â”‚  â”‚  Components  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                 â”‚                 â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                           â”‚                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚  useCSM()    â”‚                              â”‚
â”‚                    â”‚   Hooks      â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                           â”‚                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚ CMS API      â”‚                              â”‚
â”‚                    â”‚ Service      â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                           â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â”‚                 â”‚                 â”‚                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚ Fetch  â”‚       â”‚   Cache     â”‚   â”‚ Error     â”‚            â”‚
â”‚    â”‚        â”‚       â”‚  (localStorage) â”‚ Handler   â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                  â”‚               â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                            â”‚                                    â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                      â”‚   HTTP     â”‚                             â”‚
â”‚                      â”‚  (HTTPS)   â”‚                             â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                            â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ API Requests
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API GATEWAY / SERVER LAYER                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Route: /api/cms/*                      â”‚                    â”‚
â”‚  â”‚  â”œâ”€â”€ Authentication (JWT)               â”‚                    â”‚
â”‚  â”‚  â”œâ”€â”€ Authorization (Role-based)         â”‚                    â”‚
â”‚  â”‚  â”œâ”€â”€ Validation                         â”‚                    â”‚
â”‚  â”‚  â”œâ”€â”€ Rate Limiting                      â”‚                    â”‚
â”‚  â”‚  â””â”€â”€ Error Handling                     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚             â”‚             â”‚             â”‚             â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚Products â”‚  â”‚  Reviews  â”‚ â”‚  Team   â”‚ â”‚  Branches   â”‚     â”‚
â”‚    â”‚ Routes  â”‚  â”‚ Routes    â”‚ â”‚ Routes  â”‚ â”‚  Routes     â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚             â”‚            â”‚            â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                       â”‚            â”‚                           â”‚
â”‚                    â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”                       â”‚
â”‚                    â”‚  Business Logic    â”‚                       â”‚
â”‚                    â”‚  & Transformations â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                               â”‚                                â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                        â”‚   Database  â”‚                         â”‚
â”‚                        â”‚   Queries   â”‚                         â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                               â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ SQL Queries
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DATABASE LAYER (PostgreSQL)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Tables:                                 â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ companies                           â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ products                            â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ product_benefits                    â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ product_coverage                    â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ product_exclusions                  â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ product_faqs                        â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ reviews                             â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ team_members                        â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ branches                            â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ hero_slides                         â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ reasons                             â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ form_configs                        â”‚                  â”‚
â”‚  â”‚  â”œâ”€â”€ form_fields                         â”‚                  â”‚
â”‚  â”‚  â””â”€â”€ configurations                      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram: Getting Products

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚   Loads     â”‚
â”‚   Page      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useProducts()            â”‚
â”‚ Hook Called              â”‚
â”‚ (components/Products)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useEffect Runs           â”‚
â”‚ Calls CMS_API.products   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetch('/api/cms/products')   â”‚
â”‚ Sends GET Request            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server: /api/cms/products             â”‚
â”‚ - Check Authentication (JWT)          â”‚
â”‚ - Check Authorization                 â”‚
â”‚ - Query Database                      â”‚
â”‚ - Get all published products          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Query               â”‚
â”‚ SELECT * FROM products       â”‚
â”‚ WHERE status = 'published'   â”‚
â”‚ JOIN benefits, coverage...   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Results: 25 Products         â”‚
â”‚ With all related data        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transform Data               â”‚
â”‚ Serialize to JSON            â”‚
â”‚ Add metadata                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HTTP Response (200 OK)              â”‚
â”‚ {                                   â”‚
â”‚   "success": true,                  â”‚
â”‚   "data": [                         â”‚
â”‚     { id, name, benefits... },      â”‚
â”‚     { id, name, benefits... },      â”‚
â”‚     ...                             â”‚
â”‚   ]                                 â”‚
â”‚ }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser Receives Response    â”‚
â”‚ response.json() parses JSON  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setProducts(data) Updates    â”‚
â”‚ Component State              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component Re-renders with    â”‚
â”‚ 25 Product Cards             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Data Dependency Map

```
App Layout
â”‚
â”œâ”€â”€ Header
â”‚   â””â”€â”€ Needs: companies.logo, companies.name
â”‚       API: /api/cms/companies
â”‚
â”œâ”€â”€ Hero Component
â”‚   â””â”€â”€ Needs: hero_slides with images and CTAs
â”‚       API: /api/cms/slides?published=true
â”‚
â”œâ”€â”€ Products Section
â”‚   â”œâ”€â”€ Carousel Component
â”‚   â”‚   â””â”€â”€ Needs: all products with summary
â”‚   â”‚       API: /api/cms/products
â”‚   â”‚
â”‚   â””â”€â”€ Product Card Component
â”‚       â””â”€â”€ Needs: individual product details
â”‚           API: /api/cms/products/{slug}
â”‚
â”œâ”€â”€ Why Choose Us Section
â”‚   â”œâ”€â”€ Reviews Carousel
â”‚   â”‚   â””â”€â”€ Needs: customer reviews with ratings
â”‚   â”‚       API: /api/cms/reviews?featured=true
â”‚   â”‚
â”‚   â”œâ”€â”€ Reasons Grid
â”‚   â”‚   â””â”€â”€ Needs: why choose reasons
â”‚   â”‚       API: /api/cms/reasons
â”‚   â”‚
â”‚   â””â”€â”€ Stats Animation
â”‚       â””â”€â”€ Needs: company statistics
â”‚           API: /api/cms/config?category=stats
â”‚
â”œâ”€â”€ Team Page
â”‚   â”œâ”€â”€ Team Grid
â”‚   â”‚   â””â”€â”€ Needs: all team members
â”‚   â”‚       API: /api/cms/team?status=active
â”‚   â”‚
â”‚   â””â”€â”€ Member Detail
â”‚       â””â”€â”€ Needs: individual member info
â”‚           API: /api/cms/team/{id}
â”‚
â”œâ”€â”€ Branches Map
â”‚   â”œâ”€â”€ Map Component
â”‚   â”‚   â””â”€â”€ Needs: all branches with coordinates
â”‚   â”‚       API: /api/cms/branches
â”‚   â”‚
â”‚   â””â”€â”€ Branch Card
â”‚       â””â”€â”€ Needs: individual branch details
â”‚           API: /api/cms/branches/{id}
â”‚
â”œâ”€â”€ Quote Forms (per product)
â”‚   â”œâ”€â”€ Form Renderer
â”‚   â”‚   â””â”€â”€ Needs: form field configuration
â”‚   â”‚       API: /api/cms/forms?product={slug}
â”‚   â”‚
â”‚   â””â”€â”€ Form Submission
â”‚       â””â”€â”€ Posts to: /api/forms/submit
â”‚
â””â”€â”€ Footer
    â””â”€â”€ Needs: company contact info, links
        API: /api/cms/config?category=contact
```

---

## Data Model Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Company    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ belongs_to
      â”‚                  â”‚
      â”‚ has_many         â”‚
      â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Products   â”‚â”€â”€â”€â”€â–ºâ”‚  Benefits  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â–º Coverage
      â”œâ”€â–º Exclusions
      â”œâ”€â–º FAQs
      â”œâ”€â–º Eligibility
      â””â”€â–º HowToApply
      
    
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Reviews    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ status (pending/approved)
      â–¼


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reasons   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TeamMembers  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ reports_to
      â”œâ”€â–º Department
      â””â”€â–º Branch


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Branches   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ has_many
      â”œâ”€â–º Hours
      â”œâ”€â–º Manager (TeamMember)
      â””â”€â–º Staff (TeamMembers)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FormConfigs  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ has_many
      â””â”€â–º FormFields


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configuration   â”‚
â”‚ (Key-Value)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ categories:
      â”œâ”€â–º colors
      â”œâ”€â–º email
      â”œâ”€â–º departments
      â””â”€â–º settings
```

---

## API Response Structure Template

```javascript
// Success Response
{
  "success": true,
  "data": [
    {
      "id": "uuid-string",
      "name": "string",
      // ... entity-specific fields
      "createdAt": "ISO8601",
      "updatedAt": "ISO8601"
    },
    // ... more items
  ],
  "meta": {
    "total": 25,
    "page": 1,
    "limit": 20,
    "hasMore": true
  }
}

// Error Response
{
  "success": false,
  "error": {
    "code": "PRODUCT_NOT_FOUND",
    "message": "The requested product could not be found",
    "statusCode": 404
  }
}

// Paginated Response
{
  "success": true,
  "data": [...],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "pages": 8,
    "hasNext": true,
    "hasPrev": false
  }
}
```

---

## Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client Makes API Request           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Check Local  â”‚
        â”‚ Cache        â”‚
        â”‚ (1-hour TTL) â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
         Yesâ”‚       â”‚No
           â–¼       â–¼
        â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚Use â”‚  â”‚ Fetch from   â”‚
        â”‚Cache   â”‚ API Server   â”‚
        â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚
           â”‚     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
           â”‚     â”‚ Cache Result â”‚
           â”‚     â”‚ (localStorage)
           â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚
           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Return Data    â”‚
        â”‚ to Component   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TTL (Time To Live):
- Products: 1 hour
- Reviews: 30 minutes
- Team: 2 hours
- Config: 4 hours
- Slides: 1 hour
```

---

## Error Handling Flow

```
API Request
    â”‚
    â”œâ”€â–º Network Error
    â”‚   â””â”€â–º Show "Connection Failed"
    â”‚
    â”œâ”€â–º HTTP Error (4xx/5xx)
    â”‚   â”œâ”€â–º 400: Bad Request
    â”‚   â”œâ”€â–º 401: Unauthorized (refresh auth)
    â”‚   â”œâ”€â–º 403: Forbidden
    â”‚   â”œâ”€â–º 404: Not Found
    â”‚   â””â”€â–º 500: Server Error (retry)
    â”‚
    â”œâ”€â–º Timeout
    â”‚   â””â”€â–º Retry with exponential backoff
    â”‚
    â”œâ”€â–º Invalid JSON
    â”‚   â””â”€â–º Show "Data Format Error"
    â”‚
    â””â”€â–º Success
        â””â”€â–º Parse & Cache Data
```

---

## Migration Timeline

```
Week 1: Planning & Setup
  â”œâ”€ API framework selection
  â”œâ”€ Database setup
  â””â”€ Development environment

Week 2-3: API Development
  â”œâ”€ Endpoints for Products
  â”œâ”€ Endpoints for Reviews
  â”œâ”€ Endpoints for Team
  â””â”€ Endpoints for Other entities

Week 4: Data Migration
  â”œâ”€ Export existing data
  â”œâ”€ Create migration scripts
  â””â”€ Validate integrity

Week 5: Frontend Integration
  â”œâ”€ Create service layer
  â”œâ”€ Build React hooks
  â”œâ”€ Update components
  â””â”€ Test all flows

Week 6: Deployment & Monitoring
  â”œâ”€ Feature flags
  â”œâ”€ Gradual rollout
  â”œâ”€ Performance monitoring
  â””â”€ Bug fixes
```

---

## File Structure After Migration

```
project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ cms/
â”‚   â”‚       â”œâ”€â”€ products/
â”‚   â”‚       â”‚   â””â”€â”€ route.js
â”‚   â”‚       â”œâ”€â”€ reviews/
â”‚   â”‚       â”‚   â””â”€â”€ route.js
â”‚   â”‚       â”œâ”€â”€ team/
â”‚   â”‚       â”‚   â””â”€â”€ route.js
â”‚   â”‚       â”œâ”€â”€ branches/
â”‚   â”‚       â”‚   â””â”€â”€ route.js
â”‚   â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚   â””â”€â”€ route.js
â”‚   â”‚       â””â”€â”€ health/
â”‚   â”‚           â””â”€â”€ route.js
â”‚   â”‚
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ products/
â”‚       â”‚   â””â”€â”€ [slug]/
â”‚       â”‚       â””â”€â”€ page.js (now fetches via API)
â”‚       â”œâ”€â”€ team/
â”‚       â”‚   â””â”€â”€ page.js
â”‚       â””â”€â”€ branches/
â”‚           â””â”€â”€ page.js
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Products.js (uses API)
â”‚   â”œâ”€â”€ Hero.js (uses API)
â”‚   â”œâ”€â”€ WhyChooseUs.js (uses API)
â”‚   â”œâ”€â”€ TeamSection.js (uses API)
â”‚   â”œâ”€â”€ BranchMap.js (uses API)
â”‚   â””â”€â”€ ProductsData.js (DEPRECATED - remove after migration)
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ cms-api.js (new - API service layer)
â”‚   â”œâ”€â”€ db.js (new - database connection)
â”‚   â””â”€â”€ hooks/
â”‚       â””â”€â”€ useCMS.js (new - custom hooks)
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ products/
â”‚       â”œâ”€â”€ images/
â”‚       â””â”€â”€ assets/
â”‚
â”œâ”€â”€ STATIC_DATA_AUDIT.md (Documentation)
â”œâ”€â”€ CMS_IMPLEMENTATION_GUIDE.md (Practical guide)
â””â”€â”€ CMS_AUDIT_SUMMARY.md (This summary)
```

---

## Performance Optimization Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Database Level                   â”‚
â”‚    - Indexes on frequently queried   â”‚
â”‚    - Query optimization              â”‚
â”‚    - Connection pooling              â”‚
â”‚    - Read replicas for scaling       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. API Level                        â”‚
â”‚    - Pagination (limit results)     â”‚
â”‚    - Field selection (only needed)  â”‚
â”‚    - Response caching (ETag)        â”‚
â”‚    - Compression (gzip)             â”‚
â”‚    - Rate limiting                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Browser Level                    â”‚
â”‚    - LocalStorage caching           â”‚
â”‚    - Service Workers                â”‚
â”‚    - Code splitting                 â”‚
â”‚    - Image optimization             â”‚
â”‚    - Lazy loading                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Monitoring & Analytics

```
Track Metrics:
â”œâ”€ API Response Time (target: <200ms)
â”œâ”€ Database Query Time (target: <100ms)
â”œâ”€ Cache Hit Rate (target: >70%)
â”œâ”€ Error Rate (target: <0.5%)
â”œâ”€ Component Load Time (target: <1s)
â”œâ”€ User Interaction Time (target: <500ms)
â””â”€ Data Freshness (last updated)

Alerts:
â”œâ”€ API down
â”œâ”€ Response time > 1s
â”œâ”€ Error rate > 2%
â”œâ”€ Database connection failure
â””â”€ Cache corruption
```

---

**Visual Reference Created**: November 11, 2025  
**Format**: ASCII Diagrams + Reference Guides  
**Use Case**: Quick understanding of architecture and data flow
